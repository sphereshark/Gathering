<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f4f6fc;
    }
    textarea {
      width: 100%;
      height: 200px;
      padding: 10px;
      font-family: monospace;
      box-sizing: border-box;
    }
    button {
      padding: 10px 20px;
      background: #4a80f0;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    .output-container {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
    .column {
      flex: 1;
    }
    h2, h3 {
      margin-bottom: 8px;
    }
  </style>
</head>
<body>

  <h2>ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«</h2>

  <textarea id="input" placeholder="ä¾‹: 41010000 1058FA54 00000000..."></textarea><br>
  <button onclick="pasteFromClipboard()">ğŸ“‹ è²¼ã‚Šä»˜ã‘</button>
  <button onclick="convert()">ğŸ” å¤‰æ›ã™ã‚‹</button>

  <div class="output-container">
    <div class="column">
      <h3>å…¨å‡ºåŠ›</h3>
      <textarea id="output" placeholder="ã™ã¹ã¦ã®å¤‰æ›çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™"></textarea><br>
      <button onclick="copyToClipboard('output')">ğŸ“¤ ã‚³ãƒ”ãƒ¼</button>
    </div>
    <div class="column">
      <h3>00000000 ã‚’é™¤ã„ãŸå‡ºåŠ›</h3>
      <textarea id="filteredOutput" placeholder="00000000 ã‚’å«ã‚€è¡Œã¯ã“ã“ã§ã¯çœã‹ã‚Œã¾ã™"></textarea><br>
      <button onclick="copyToClipboard('filteredOutput')">ğŸ“¤ ã‚³ãƒ”ãƒ¼</button>
    </div>
  </div>

  <script>
    function pasteFromClipboard() {
      navigator.clipboard.readText().then(text => {
        document.getElementById('input').value = text;
      }).catch(err => {
        alert("ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã®èª­ã¿å–ã‚Šã«å¤±æ•—ã—ã¾ã—ãŸ: " + err);
      });
    }

    function copyToClipboard(elementId) {
      const text = document.getElementById(elementId).value;
      navigator.clipboard.writeText(text).then(() => {
        alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
      }).catch(err => {
        alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ: " + err);
      });
    }

    function convert() {
      const input = document.getElementById('input').value;
      const lines = input.trim().split(/\n/);
      const outputLines = [];
      const filteredLines = [];
      let address = 0x00120000;

      for (let line of lines) {
        line = line.trim();
        if (!line) continue;

        const parts = line.split(/\s+/);
        const data = parts.slice(1); // æœ€åˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç„¡è¦–

        for (let word of data) {
          const addrHex = address.toString(16).toUpperCase().padStart(8, '0');
          const formatted = `${addrHex} ${word}`;
          outputLines.push(formatted);
          if (word !== "00000000") {
            filteredLines.push(formatted);
          }
          address += 4;
        }
      }

      document.getElementById('output').value = outputLines.join('\n');
      document.getElementById('filteredOutput').value = filteredLines.join('\n');
    }
  </script>

</body>
</html>
