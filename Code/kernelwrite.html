<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<!-- <link rel="stylesheet" href="style.css"> -->
</head>
<body>
<div class="container">

<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>コード変換ツール</title>
<style>
body {
  background: #0f1724; color: #e6eef6;
  font-family: Consolas, monospace;
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; height: 100vh; gap: 20px;
}
button {
  background: #1f2b40; color: #fff;
  border: none; border-radius: 8px;
  padding: 12px 20px; font-size: 15px;
  cursor: pointer; transition: background 0.2s;
}
button:hover { background: #2b3d60; }
#status { font-size: 13px; color: #9aa4b2; }
</style>
</head>
<body>
  <h1>カーネルコードをkernelwriteに変換<br></h1>
  <button id="convertBtn">クリップボードのコードを変換</button>
  <br>
  <h1>#の行をelseにしてくれます。</h1>
  <div id="status"></div>

<script>
async function convertClipboard() {
  const status = document.getElementById('status');
  try {
    // クリップボードのテキストを取得
    const text = await navigator.clipboard.readText();
    if (!text.trim()) {
      status.textContent = 'クリップボードが空です。';
      return;
    }

    // 行ごとに処理
    const lines = text.trim().split(/\r?\n/).filter(Boolean);

    // '#'で始まる行を「else」に、他を「if」に使う
    const ifLines = [];
    const elseLines = [];
    for (const line of lines) {
      const m = line.replace(/^#/, '').trim().split(/\s+/);
      if (line.startsWith('#')) elseLines.push(m);
      else if (m.length >= 2) ifLines.push(m);
    }

    // コード生成
    const result =
`if(isEnabled) {
${ifLines.map(([addr, val]) => `    kernel_write_value(0x${addr}, 0x${val});`).join('\n')}
}
else {
${elseLines.map(([addr, val]) => `    kernel_write_value(0x${addr}, 0x${val});`).join('\n')}
}`;

    // クリップボードに書き戻す
    await navigator.clipboard.writeText(result);
    status.textContent = '変換してコピーしました ✅';
    setTimeout(()=>status.textContent='', 2000);
  } catch (err) {
    console.error(err);
    status.textContent = 'エラー: ' + err.message;
  }
}

document.getElementById('convertBtn').addEventListener('click', convertClipboard);
</script>
</body>
</html>

</body>
</html>

  <button class="back" onclick="window.location.href='index.html'">戻る</button>
</div>

</body>
</html>
